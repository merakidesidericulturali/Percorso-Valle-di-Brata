<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Percorso Valle di Brata</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center; 
        }

        /* STILI LOGHI */
        .logo-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        .logo-container img {
            max-height: 50px; 
            width: auto;
            object-fit: contain;
        }

        .logo-meraki {
            max-height: 60px !important; 
        }
        
        /* TESTI PRINCIPALI */
        h1 {
            color: #333;
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        /* SOTTOTITOLO VUOTO */
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
            line-height: 1.4;
            height: 0;
            margin-bottom: 0;
        }
        
        .route-info {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: left; 
        }
        
        .route-info h2 {
            font-size: 18px;
            color: #333;
            margin-bottom: 10px;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .info-item:last-child {
            border-bottom: none;
        }
        
        .info-label {
            color: #666;
            font-size: 14px;
        }
        
        .info-value {
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }
        
        .waypoints {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        .waypoints h3 {
            font-size: 14px;
            color: #333;
            margin-bottom: 10px;
        }
        
        .waypoint {
            font-size: 13px;
            color: #555;
            padding: 5px 0;
        }
        
        .buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 25px; 
        }
        
        .btn {
            padding: 18px 30px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-maps {
            background: #4285F4;
            color: white;
        }
        
        .btn-maps:hover {
            background: #3367d6;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(66, 133, 244, 0.4);
        }
        
        .btn-download {
            background: #f5f5f5;
            color: #333;
            border: 2px solid #ddd;
        }
        
        .btn-download:hover {
            background: #e8e8e8;
            border-color: #ccc;
        }
        
        .icon {
            width: 24px;
            height: 24px;
        }

        /* STILE PER IL TESTO IN CALCE CON A CAPO */
        .footer-text {
            font-size: 11px;
            color: #888;
            line-height: 1.5;
            padding: 0 10px;
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 30px 20px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .waypoint {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        
        <div class="logo-container">
            <img src="logo_meraki-desideri culturali (2).png" alt="Logo Meraki Desideri Culturali" class="logo-meraki">
            <img src="illo.png" alt="Logo stilizzato illustrativo" class="logo-illo">
        </div>
        
        <h1>Percorso Valle di Brata</h1>
        <p class="subtitle"></p>
        
        <div class="route-info">
            <h2>Informazioni Percorso</h2>
            <div class="info-item">
                <span class="info-label">Distanza</span>
                <span class="info-value">6 km</span>
            </div>
            <div class="info-item">
                <span class="info-label">Dislivello</span>
                <span class="info-value">+150 m</span>
            </div>
            <div class="info-item">
                <span class="info-label">Punti tracciato</span>
                <span class="info-value">583</span>
            </div>
            
            <div class="waypoints">
                <h3>üìç Punti d'interesse</h3>
                <div class="waypoint">üè† Casa degli Amici della Natura - Saviore</div>
                <div class="waypoint">üèöÔ∏è Fienile distrutto da Vaia</div>
                <div class="waypoint">üçÑ Fomes Fomentarius (funghi)</div>
                <div class="waypoint">‚õ∞Ô∏è Roccia Cas√©l</div>
                <div class="waypoint">‚õ∞Ô∏è Roccia del Parto</div>
                <div class="waypoint">üèîÔ∏è Riparo sotto Roccia</div>
                <div class="waypoint">üíß Pozze di Brata</div>
                <div class="waypoint">üíß Sorgente dell'Orso</div>
                <div class="waypoint">üèïÔ∏è Area PicNic</div>
            </div>
        </div>
        
        <div class="buttons">
            
            <a href="#" class="btn btn-maps" id="mapsBtn" target="_blank">
                <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                </svg>
                Apri su Google My Maps con punti di interesse
            </a>
            
            <button class="btn btn-download" id="downloadBtn">
                <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                </svg>
                Scarica file GPX - solo tracciato
            </button>
        </div>

        <p class="footer-text">
            nell'ambito del progetto Nuove trame e Saperi in Val Saviore <br>
            di Meraki desideri culturali, <br>
            con il contributo dell'Avviso Unico Cultura di Regione Lombardia
        </p>
    </div>

    <script>
        // Contenuto GPX fornito dall'utente.
        const gpxTrkOnlyContent = `<?xml version='1.0' encoding='UTF-8'?>
<gpx version="1.1" creator="Valle di Brata" xmlns="http://www.topografix.com/GPX/1/1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd">
  <metadata>
    <name>Valle di Brata - Tracciato</name>
  </metadata>
  <trk>
    <name>Valle di Brata - Valle della consapevolezza</name>
    <trkseg>
      <trkpt lat="46.081263" lon="10.404049">
        <ele>1275.708876</ele>
        <time>2025-11-01T13:37:01.157Z</time>
      </trkpt>
      <trkpt lat="46.079498" lon="10.446906">
        <ele>1277.375543</ele>
        <time>2025-11-01T13:59:47.026Z</time>
      </trkpt>
    </trkseg>
  </trk>
</gpx>`;
            
        // Funzione per estrarre i punti del tracciato (non usata per il link My Maps, ma necessaria per la struttura)
        function extractPointsForMaps(gpxContent) {
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(gpxContent, "application/xml");
            const trkpts = xmlDoc.getElementsByTagName("trkpt");
            const points = [];
            for (let i = 0; i < trkpts.length; i++) {
                points.push({
                    lat: trkpts[i].getAttribute('lat'),
                    lon: trkpts[i].getAttribute('lon')
                });
            }
            return points;
        }
        
        const waypoints = extractPointsForMaps(gpxTrkOnlyContent); 

        // Download GPX
        document.getElementById('downloadBtn').addEventListener('click', function() {
            const blob = new Blob([gpxTrkOnlyContent], { type: 'application/gpx+xml' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'valle_di_brata_tracciato_pulito.gpx'; 
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
        });

        // Funzione per generare il link Google Maps (My Maps)
        function createGoogleMapsUrl() {
            // ‚úÖ LINK CORRETTO INSERITO: Questo risolver√† l'errore sul cellulare.
            const realMyMapsUrl = "https://www.google.com/maps/d/u/4/embed?mid=1KEWoPxCcGFTKc6agpgBiRgv-sc-STpU&ehbc=2E312F"; 
            
            return realMyMapsUrl;
        }

        // Configura il link Google Maps
        document.getElementById('mapsBtn').href = createGoogleMapsUrl();

        // Animazione click
        document.querySelectorAll('.btn').forEach(btn => {
            btn.addEventListener('click', function() {
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 100);
            });
        });
    </script>
</body>
</html>